<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boutique ‚Äî Kit R√©novateur Sneakers | La Laverie Lens</title>
    <meta name="description"
        content="Kit nettoyage sneakers professionnel utilis√© dans nos laveries. Efficace sur cuir, toile, nubuck. Livraison Colissimo. Satisfait ou rembours√©.">
    <link rel="canonical" href="https://www.lalaverielens.fr/shop" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&family=Sora:wght@700;800&display=swap"
        rel="stylesheet">
    <script src="https://js.stripe.com/v3/"></script>


    <style>
        :root {
            --green: #2d6a4f;
            --green-dark: #1b4332;
            --accent: #4ade80;
            --gold: #f59e0b;
            --text: #1a1a1a;
            --muted: #666;
            --bg: #fff;
            --bg2: #f8f9fa;
            --danger: #e63946;
            --radius: 12px;
            --shadow: 0 4px 16px rgba(0, 0, 0, .08);
            --tr: all .25s ease;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Instrument Sans', sans-serif;
            color: var(--text);
            background: var(--bg);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
        header {
            position: sticky;
            top: 0;
            z-index: 200;
            background: #2d3e30;
            height: 110px;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, .15);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .logo-link img {
            height: 50px;
            vertical-align: middle;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .seo-nav {
            display: flex;
            gap: 18px;
            margin-right: 16px;
            align-items: center;
        }

        .seo-nav a {
            color: rgba(255, 255, 255, .8);
            font-size: .88rem;
            font-weight: 500;
            text-decoration: none;
            transition: color .2s;
        }

        .seo-nav a:hover {
            color: #fff;
        }

        .seo-nav a.shop-link {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: #ffeb3b;
            color: #1a1a1a !important;
            font-weight: 700;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: .85rem;
        }

        .btn-live-soft {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: transparent;
            border: 1.5px solid rgba(255, 255, 255, .4);
            color: #fff;
            padding: 7px 16px;
            border-radius: 30px;
            font-weight: 600;
            font-size: .85rem;
            text-decoration: none;
        }

        @media(max-width: 768px) {
            .seo-nav {
                display: none;
            }
        }

        /* ‚îÄ‚îÄ MAIN SPLIT LAYOUT ‚îÄ‚îÄ */
        .shop-split {
            display: grid;
            grid-template-columns: 1fr 1fr;
            min-height: calc(100vh - 110px);
        }

        @media(max-width: 768px) {
            .shop-split {
                grid-template-columns: 1fr;
                min-height: auto;
            }
        }

        /* LEFT visual */
        .shop-left {
            position: sticky;
            top: 110px;
            height: calc(100vh - 110px);
            background: linear-gradient(180deg, #2d3e30 0%, #172a1f 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 50px 40px;
            overflow: hidden;
        }

        @media(max-width: 768px) {
            .shop-left {
                position: static;
                height: auto;
                padding: 40px 24px;
                min-height: 420px;
            }
        }

        .shop-left::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(ellipse at 30% 50%, rgba(45, 212, 191, .12) 0%, transparent 65%);
            pointer-events: none;
        }

        .shop-left-inner {
            position: relative;
            z-index: 1;
            text-align: center;
            width: 100%;
        }

        #mainImage {
            width: auto;
            max-width: 95%;
            height: auto;
            max-height: calc(100vh - 250px);
            object-fit: contain;
            border-radius: 24px;
            box-shadow: 0 30px 70px rgba(0, 0, 0, .5);
            background: #1a1a1a;
            display: block;
            margin: 0 auto 24px;
            transition: transform .4s ease;
        }

        #mainImage:hover {
            transform: scale(1.03);
        }

        .product-rating-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, .12);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, .2);
            color: #fff;
            padding: 8px 18px;
            border-radius: 30px;
            font-size: .88rem;
            font-weight: 600;
            margin-bottom: 16px;
        }

        #thumbsContainer {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .thumb {
            width: 64px;
            height: 64px;
            border-radius: 10px;
            object-fit: cover;
            cursor: pointer;
            border: 2px solid rgba(255, 255, 255, .2);
            transition: border-color .2s, transform .2s;
            background: #333;
        }

        .thumb.active,
        .thumb:hover {
            border-color: var(--accent);
            transform: scale(1.08);
        }

        /* RIGHT buy panel */
        .shop-right {
            padding: 25px 44px;
            display: flex;
            flex-direction: column;
            gap: 22px;
            overflow-y: auto;
            max-height: calc(100vh - 110px);
        }

        @media(max-width: 768px) {
            .shop-right {
                padding: 36px 24px;
                max-height: none;
            }
        }

        .product-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #e6f4ea;
            color: #1b4332;
            font-size: .78rem;
            font-weight: 700;
            letter-spacing: .06em;
            text-transform: uppercase;
            padding: 5px 14px;
            border-radius: 20px;
        }

        .product-tag .dot-green {
            width: 7px;
            height: 7px;
            background: #22c55e;
            border-radius: 50%;
            animation: blink 1.5s infinite;
        }

        #productTitle {
            font-family: 'Sora', sans-serif;
            font-size: clamp(1.6rem, 2.5vw, 2.1rem);
            line-height: 1.2;
        }

        .product-meta {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .stars-inline {
            color: var(--gold);
            font-size: 1rem;
        }

        .reviews-count {
            font-size: .85rem;
            color: var(--muted);
        }

        .review-quote {
            font-size: .85rem;
            color: var(--muted);
            font-style: italic;
        }

        .price-block {
            display: flex;
            align-items: baseline;
            gap: 10px;
            border-top: 1px solid #f0f0f0;
            border-bottom: 1px solid #f0f0f0;
            padding: 16px 0;
        }

        #productPrice {
            font-size: 2.6rem;
            font-weight: 700;
            color: var(--green-dark);
        }

        .price-note {
            font-size: .88rem;
            color: var(--muted);
        }

        /* Features */
        .product-features {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .pf {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .pf .pi {
            font-size: 1.3rem;
            margin-top: 2px;
            flex-shrink: 0;
        }

        .pf .pt strong {
            display: block;
            font-size: .92rem;
            color: var(--text);
        }

        .pf .pt span {
            font-size: .82rem;
            color: var(--muted);
            line-height: 1.4;
        }

        /* CTA */
        .cta-block {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .urgency-line {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 7px;
            font-size: .82rem;
            color: var(--muted);
            font-weight: 500;
        }

        .urgency-line .dot-live {
            width: 7px;
            height: 7px;
            background: #22c55e;
            border-radius: 50%;
            animation: blink 1.5s infinite;
            flex-shrink: 0;
        }

        .add-to-cart-btn {
            background: var(--green);
            color: #fff;
            border: none;
            border-radius: 14px;
            padding: 18px;
            font-size: 1.08rem;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: var(--tr);
            letter-spacing: .2px;
        }

        .add-to-cart-btn:hover {
            background: var(--green-dark);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(45, 106, 79, .3);
        }

        .secure-note {
            text-align: center;
            font-size: .78rem;
            color: #aaa;
        }

        /* Mini perks grid */
        .mini-perks {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .mini-perk {
            background: var(--bg2);
            border-radius: 10px;
            padding: 12px 14px;
            display: flex;
            gap: 9px;
            align-items: flex-start;
        }

        .mini-perk .mpi {
            font-size: 1.1rem;
            flex-shrink: 0;
            margin-top: 1px;
        }

        .mini-perk .mpc strong {
            display: block;
            font-size: .83rem;
            margin-bottom: 2px;
        }

        .mini-perk .mpc span {
            color: var(--muted);
            font-size: .76rem;
            line-height: 1.4;
        }

        /* Shipping note */
        .ship-note {
            background: #fffbeb;
            border-left: 3px solid var(--gold);
            border-radius: 0 10px 10px 0;
            padding: 12px 14px;
            font-size: .82rem;
            color: #92400e;
            display: flex;
            gap: 10px;
            align-items: flex-start;
        }

        /* ‚îÄ‚îÄ CART PANEL (unchanged logic) ‚îÄ‚îÄ */
        @keyframes blink {

            0%,
            100% {
                opacity: 1
            }

            50% {
                opacity: .3
            }
        }

        @keyframes shopPulse {

            0%,
            100% {
                box-shadow: 0 0 0 0 rgba(255, 235, 59, .6)
            }

            50% {
                box-shadow: 0 0 0 6px rgba(255, 235, 59, 0)
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(12px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, .5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: .3s;
        }

        .cart-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .cart-panel {
            position: fixed;
            top: 0;
            right: -500px;
            width: 100%;
            max-width: 450px;
            height: 100%;
            background: #fff;
            z-index: 1000;
            transition: right .4s cubic-bezier(.25, 1, .5, 1);
            display: flex;
            flex-direction: column;
            box-shadow: -5px 0 25px rgba(0, 0, 0, .1);
        }

        .cart-panel.open {
            right: 0;
        }

        .cart-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-title {
            font-size: 1.4rem;
            font-weight: 700;
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
        }

        .cart-body {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .cart-footer {
            padding: 20px;
            border-top: 1px solid #eee;
            background: #fcfcfc;
        }

        .cart-item {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #f0f0f0;
        }

        .cart-item img {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
        }

        .item-details h4 {
            font-size: 1rem;
            margin-bottom: 5px;
        }

        .item-price {
            color: var(--muted);
            font-weight: 500;
        }

        .remove-btn {
            color: var(--danger);
            background: none;
            border: none;
            font-size: .85rem;
            cursor: pointer;
            margin-top: 5px;
            text-decoration: underline;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: .95rem;
        }

        .summary-total {
            font-weight: 700;
            font-size: 1.2rem;
        }

        .btn-block {
            width: 100%;
            padding: 16px;
            background: var(--green);
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: 1.05rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 8px;
        }

        .btn-block:hover {
            background: var(--green-dark);
        }

        .btn-secondary {
            background: transparent;
            color: var(--muted);
            border: 1px solid #ddd;
            margin-top: 8px;
        }

        .view-section {
            display: none;
            animation: fadeInUp .3s ease;
        }

        .view-section.active {
            display: block;
        }

        /* Checkout form */
        .form-group {
            margin-bottom: 14px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            font-size: .88rem;
        }

        .form-input {
            width: 100%;
            padding: 11px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: inherit;
            font-size: .95rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
        }

        .payment-option {
            border: 2px solid var(--green);
            background: #f0fdf4;
            padding: 14px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 16px;
        }

        .success-box {
            text-align: center;
            padding: 20px 0;
        }

        .success-icon {
            font-size: 3.5rem;
            color: var(--green);
            margin-bottom: 16px;
            display: block;
        }

        .bank-details {
            background: #f8f9fa;
            padding: 18px;
            border-radius: 8px;
            text-align: left;
            margin: 16px 0;
            font-family: monospace;
            border: 1px solid #eee;
            font-size: .88rem;
        }
    </style>
  <link rel="stylesheet" crossorigin href="/assets/style-dp_sgbv8.css">
</head>

<body>

    <!-- Header -->
    <header>
        <div class="header-container">
            <a href="/" class="logo-link">
                <img src="/images/logo-horizontal.png" alt="La Laverie Automatique Lens">
            </a>
            <div class="header-actions">
                <nav class="seo-nav">
                    <a href="/services.html">Services</a>
                    <a href="/lavage-couette-lens.html">Lavage Couettes</a>
                    <a href="/sechage-rapide-lens.html">S√©chage Rapide</a>
                    <a href="/tarifs.html">Tarifs</a>
                    <a href="/blog.html">Blog</a>
                    <a href="/shop.html" class="shop-link" style="animation: shopPulse 2s infinite;"><span>üõí</span>
                        Shop</a>
                </nav>
                <a href="https://gad.touchnpay.fr/fr/public/material/406jkj1mieeqrm3" target="_blank"
                    class="btn-live-soft">
                    Disponibilit√© <span
                        style="width:7px;height:7px;background:#4ade80;border-radius:50%;animation:blink 1.5s infinite;display:inline-block;"></span>
                </a>
            </div>
        </div>
    </header>

    <main>
        <!-- Main Split -->
        <div class="shop-split">

            <!-- LEFT: Visual -->
            <div class="shop-left">
                <div class="shop-left-inner">
                    <img id="mainImage" src="/images/prod-1771675751138-Nettoyage Chaussures Lens Lille.png" alt="Kit R√©novateur Sneakers Pro">
                    <div id="thumbsContainer">
                        <img src="/images/prod-1771675751138-Nettoyage Chaussures Lens Lille.png" class="thumb active"
                            onclick="document.getElementById('mainImage').src='/images/prod-1771675751138-Nettoyage Chaussures Lens Lille.png'; document.querySelectorAll('.thumb').forEach(t=>t.classList.remove('active')); this.classList.add('active');">
                        <img src="/images/prod-1771675751162-Nettoyage Sneakers Lens Lille.png" class="thumb "
                            onclick="document.getElementById('mainImage').src='/images/prod-1771675751162-Nettoyage Sneakers Lens Lille.png'; document.querySelectorAll('.thumb').forEach(t=>t.classList.remove('active')); this.classList.add('active');">
                        <img src="/images/prod-1771675751173-Nettoyage Basket Lens.png" class="thumb "
                            onclick="document.getElementById('mainImage').src='/images/prod-1771675751173-Nettoyage Basket Lens.png'; document.querySelectorAll('.thumb').forEach(t=>t.classList.remove('active')); this.classList.add('active');">
                    </div>
                </div>
            </div>

            <!-- RIGHT: Buy Panel -->
            <div class="shop-right">



                <div>
                    <h1 id="productTitle">Kit R√©novateur Sneakers Pro</h1>
                    <div class="product-meta" style="margin-top:8px;">
                        <span class="stars-inline">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                        <span class="reviews-count" id="productRatingText">4.9 ¬∑ 664 avis</span>
                        <span class="review-quote" id="productRatingQuote">¬´Excellent produit, tr√®s facile √† appliquer ... Un bon kit de nettoyage. ¬ª ‚Äî J***r</span>
                    </div>
                </div>

                <p id="productSubtitle" style="font-size:.96rem;color:#444;line-height:1.65;">
                    L'arme secr√®te des experts en nettoyage de chaussures, maintenant chez vous. Efficace sur cuir, toile, nubuck et semelles ‚Äî r√©sultats visibles d√®s la premi√®re utilisation !
                </p>

                <div class="price-block">
                    <span id="productPrice">18.9 ‚Ç¨</span>
                    <span class="price-note">TTC ¬∑ frais de port inclus</span>
                </div>

                <!-- Features -->
                <div class="product-features" id="productFeatures">
                    <div class="pf">
                        <span class="pi">üß¥</span>
                        <div class="pt"><strong>Spray Nettoyant Expert 150ml</strong><span>Formule professionnelle sans rin√ßage ‚Äî √©limine les taches tenaces</span></div>
                    </div>
                    <div class="pf">
                        <span class="pi">ü™•</span>
                        <div class="pt"><strong>Brosse Premium Poils Souples</strong><span>Respecte tous les mat√©riaux, y compris cuir verni et daim</span></div>
                    </div>
                    <div class="pf">
                        <span class="pi">ü™•</span>
                        <div class="pt"><strong>Brosse Premium Poils Durs</strong><span>Nettoye parfaitement les semelles, lacets et surfaces dures.</span></div>
                    </div>
                    <div class="pf">
                        <span class="pi">üß§</span>
                        <div class="pt"><strong>Chiffon Microfibre Haute Densit√©</strong><span>Finition impeccable sans rayures ni r√©sidus</span></div>
                    </div>
                </div>

                <!-- CTA -->
                <div class="cta-block">
                    <div class="urgency-line"><span class="dot-live"></span> Stock disponible ‚Äî commande trait√©e sous
                        24h
                    </div>
                    <button class="add-to-cart-btn" onclick="addToCart()"><span>üõí</span> Commander ‚Äî <span
                            id="priceBtn">18.9
                            ‚Ç¨</span></button>
                    <p class="secure-note">üîí Paiement s√©curis√© par CB via Stripe ¬∑ Aucune donn√©e bancaire stock√©e</p>
                </div>

                <!-- Mini perks -->
                <div class="mini-perks">
                    <div class="mini-perk"><span class="mpi">‚Ü©Ô∏è</span>
                        <div class="mpc"><strong>Retour 14 jours</strong><span>Satisfait ou rembours√©, produit non
                                ouvert</span></div>
                    </div>
                    <div class="mini-perk"><span class="mpi">üß∫</span>
                        <div class="mpc"><strong>Test√© en laverie</strong><span>Utilis√© par nos √©quipes</span></div>
                    </div>
                    <div class="mini-perk"><span class="mpi">üìû</span>
                        <div class="mpc"><strong>SAV r√©actif</strong><span>R√©ponse sous 24h par email</span></div>
                    </div>
                    <div class="mini-perk"><span class="mpi">üè¶</span>
                        <div class="mpc"><strong>Achat s√©curis√©</strong><span>Virement bancaire, z√©ro risque
                                fraude</span>
                        </div>
                    </div>
                </div>

                <!-- Shipping note -->
                <div class="ship-note">
                    <span>üì¶</span>
                    <div><strong>Exp√©dition depuis notre entrep√¥t logistique partenaire.</strong> D√©lai estim√© : sous 15
                        jours
                        ouvr√©s via Colissimo suivi. L'enl√®vement en laverie √† Lens n'est pas disponible.</div>
                </div>

            </div>
        </div>

        <!-- Cart Overlay & Panel -->
        <div class="cart-overlay" id="cartOverlay" onclick="closeCart()"></div>
        <div class="cart-panel" id="cartPanel">
            <div class="cart-header">
                <span class="cart-title">Votre Panier</span>
                <button class="close-cart" onclick="closeCart()" aria-label="Fermer le panier">√ó</button>
            </div>

            <div class="cart-body">
                <!-- Cart Items -->
                <div id="view-cart" class="view-section active">
                    <div id="cartItemsContainer">
                        <p style="text-align:center;color:#999;margin-top:50px;">Votre panier est vide.</p>
                    </div>
                </div>

                <!-- Checkout Form -->
                <div id="view-checkout" class="view-section">
                    <h3 style="margin-bottom:20px;">Informations de livraison</h3>
                    <form id="checkoutForm" onsubmit="handleOrder(event)">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Nom</label>
                                <input type="text" id="input-lastname" class="form-input" required placeholder="Dupont">
                            </div>
                            <div class="form-group">
                                <label>Pr√©nom</label>
                                <input type="text" id="input-firstname" class="form-input" required placeholder="Jean">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>T√©l√©phone</label>
                            <input type="tel" id="input-phone" class="form-input" required placeholder="06 12 34 56 78">
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="input-email" class="form-input" required
                                placeholder="jean.dupont@email.com">
                        </div>
                        <div class="form-group">
                            <label>Adresse compl√®te</label>
                            <textarea id="address-input" class="form-input" rows="3" required
                                placeholder="12 Rue de la Paix, 62300 Lens"></textarea>
                        </div>

                        <h3 style="margin:24px 0 14px;">Paiement</h3>
                        <div class="payment-option">
                            <span style="font-size:1.2rem;">üí≥</span>
                            <div>
                                <strong>Carte Bancaire</strong>
                                <div style="font-size:.82rem;color:#666;">Paiement s√©curis√© via Stripe</div>
                            </div>
                            <div style="margin-left:auto;color:var(--green);">‚óè</div>
                        </div>
                    </form>
                </div>

                <!-- Success -->
                <div id="view-success" class="view-section">
                    <div class="success-box">
                        <span class="success-icon">üéâ</span>
                        <h2>Merci <span id="customerNameDisplay"></span> !</h2>
                        <p style="color:#666;margin:10px 0;">Votre commande <strong>#<span
                                    id="orderIdDisplay"></span></strong>
                            a √©t√© enregistr√©e avec succ√®s.</p>
                        <div class="bank-details" style="background: #f0fdf4; border: 1px solid #bbf7d0;">
                            <p style="color: #166534; font-weight: 600; text-align: center; margin: 0;">Paiement
                                confirm√©
                            </p>
                        </div>
                        <p style="font-size:.88rem;color:#666;margin-top: 15px;">Un email de confirmation vous a √©t√©
                            envoy√©.
                            Nous vous tiendrons inform√© de l'exp√©dition sous 15 jours.</p>
                        <button class="btn-block btn-secondary" onclick="window.location.href='/shop.html'">Retour √† la
                            boutique</button>
                    </div>
                </div>
            </div>

            <div class="cart-footer" id="cartFooter">
                <div class="summary-row">
                    <span>Total</span>
                    <span class="summary-total" id="cartTotalDisplay">0,00 ‚Ç¨</span>
                </div>
                <button class="btn-block" id="btnMainAction" onclick="goToCheckout()">Commander</button>
            </div>
        </div>

        <script type="application/json" id="product-data">
            {"id":1,"name":"Kit R√©novateur Sneakers Pro","price":18.9,"images":["/images/prod-1771675751138-Nettoyage Chaussures Lens Lille.png","/images/prod-1771675751162-Nettoyage Sneakers Lens Lille.png","/images/prod-1771675751173-Nettoyage Basket Lens.png"],"description":"Une formule unique d√©velopp√©e pour nettoyer en profondeur sans ab√Æmer les mat√©riaux (cuir, toile, nubuck).","subtitle":"L'arme secr√®te des experts en nettoyage de chaussures, maintenant chez vous. Efficace sur cuir, toile, nubuck et semelles ‚Äî r√©sultats visibles d√®s la premi√®re utilisation !","rating_text":"4.9 ¬∑ 664 avis","rating_quote":"¬´Excellent produit, tr√®s facile √† appliquer ... Un bon kit de nettoyage. ¬ª ‚Äî J***r","features":[{"icon":"üß¥","title":"Spray Nettoyant Expert 150ml","subtitle":"Formule professionnelle sans rin√ßage ‚Äî √©limine les taches tenaces"},{"icon":"ü™•","title":"Brosse Premium Poils Souples","subtitle":"Respecte tous les mat√©riaux, y compris cuir verni et daim"},{"icon":"ü™•","title":"Brosse Premium Poils Durs","subtitle":"Nettoye parfaitement les semelles, lacets et surfaces dures."},{"icon":"üß§","title":"Chiffon Microfibre Haute Densit√©","subtitle":"Finition impeccable sans rayures ni r√©sidus"}]}
        </script>
        <script>
            let products = [];
            let currentProduct = null;
            try {
                const dataEl = document.getElementById('product-data');
                if (dataEl && dataEl.textContent !== 'null') {
                    currentProduct = JSON.parse(dataEl.textContent);
                }
            } catch (e) { console.error('Error parsing initial product data', e); }

            console.log('Initial product loaded:', currentProduct);
            let cart = [];
            let stripe = null;

            let els = {};

            document.addEventListener('DOMContentLoaded', async () => {
                // Map elements only after DOM is ready
                els = {
                    mainImage: document.getElementById('mainImage'),
                    thumbsContainer: document.getElementById('thumbsContainer'),
                    title: document.getElementById('productTitle'),
                    subtitle: document.getElementById('productSubtitle'),
                    ratingText: document.getElementById('productRatingText'),
                    ratingQuote: document.getElementById('productRatingQuote'),
                    featuresContainer: document.getElementById('productFeatures'),
                    price: document.getElementById('productPrice'),
                    cartOverlay: document.getElementById('cartOverlay'),
                    cartPanel: document.getElementById('cartPanel'),
                    cartItems: document.getElementById('cartItemsContainer'),
                    totalDisplay: document.getElementById('cartTotalDisplay'),
                    btnMainAction: document.getElementById('btnMainAction'),
                    cartFooter: document.getElementById('cartFooter')
                };

                // Initialiser Stripe seulement si la variable globale Stripe est dispo
                if (typeof Stripe !== 'undefined') {
                    stripe = Stripe('pk_live_51T31PNFNh6xFvCiGQAJGzWjjXbb1Gq1Ixpcli0MWZGqQWatAhI65EsleVf8Maq1sKrJLaVMkPoLFtLRL2Z6BGqbw00yVOfwhI4');
                }

                await loadShopData();
                checkStripeStatus();
            });

            async function loadShopData() {
                try {
                    const response = await fetch('/api/shop');
                    products = await response.json();
                    if (products.length > 0) {
                        currentProduct = products[0];
                        loadProduct(currentProduct);
                    }
                } catch (e) {
                    console.error('Erreur chargement boutique:', e);
                }
            }

            function loadProduct(product) {
                els.title.textContent = product.name;
                if (product.subtitle) els.subtitle.innerHTML = product.subtitle;
                if (product.rating_text) els.ratingText.textContent = product.rating_text;
                if (product.rating_quote) els.ratingQuote.textContent = product.rating_quote;

                const priceStr = Number(product.price).toFixed(2).replace('.', ',') + ' ‚Ç¨';
                els.price.textContent = priceStr;
                document.getElementById('priceBtn').textContent = priceStr;

                // Features
                if (product.features && els.featuresContainer) {
                    els.featuresContainer.innerHTML = '';
                    product.features.forEach(f => {
                        const featEl = document.createElement('div');
                        featEl.className = 'pf';
                        featEl.innerHTML = `
                        <span class="pi">${f.icon}</span>
                        <div class="pt"><strong>${f.title}</strong><span>${f.subtitle}</span></div>
                    `;
                        els.featuresContainer.appendChild(featEl);
                    });
                }

                if (product.images && product.images.length > 0) {
                    els.mainImage.src = product.images[0];
                    els.thumbsContainer.innerHTML = '';
                    product.images.forEach((img, index) => {
                        const thumb = document.createElement('img');
                        thumb.src = img;
                        thumb.className = `thumb ${index === 0 ? 'active' : ''}`;
                        thumb.onclick = () => {
                            els.mainImage.src = img;
                            document.querySelectorAll('.thumb').forEach(t => t.classList.remove('active'));
                            thumb.classList.add('active');
                        };
                        els.thumbsContainer.appendChild(thumb);
                    });
                }
            }

            function addToCart() {
                console.log('addToCart clicked', { currentProduct });
                if (!currentProduct) {
                    alert('Erreur: Le produit n\'est pas encore charg√©. Veuillez rafra√Æchir la page.');
                    return;
                }
                const exists = cart.find(i => i.id === currentProduct.id);
                if (exists) { exists.qty++; } else { cart.push({ ...currentProduct, qty: 1 }); }
                updateCartUI();
                openCart();
            }

            function removeFromCart(id) {
                cart = cart.filter(i => i.id !== id);
                updateCartUI();
            }

            function updateCartUI() {
                els.cartItems.innerHTML = '';
                let total = 0;
                if (cart.length === 0) {
                    els.cartItems.innerHTML = '<p style="text-align:center;color:#999;margin-top:50px;">Votre panier est vide.</p>';
                } else {
                    cart.forEach(item => {
                        const price = Number(item.price);
                        total += price * item.qty;
                        const el = document.createElement('div');
                        el.className = 'cart-item';
                        el.innerHTML = `
                        <img src="${item.images[0]}" alt="${item.name}">
                        <div class="item-details">
                            <h4>${item.name}</h4>
                            <div class="item-price">${price.toFixed(2).replace('.', ',')} ‚Ç¨ √ó ${item.qty}</div>
                            <button class="remove-btn" onclick="removeFromCart(${item.id})">Supprimer</button>
                        </div>`;
                        els.cartItems.appendChild(el);
                    });
                }
                els.totalDisplay.textContent = total.toFixed(2).replace('.', ',') + ' ‚Ç¨';
                els.btnMainAction.disabled = cart.length === 0;
                els.btnMainAction.style.opacity = cart.length === 0 ? '.5' : '1';
            }

            function openCart() {
                els.cartOverlay.classList.add('open');
                els.cartPanel.classList.add('open');
                switchView('view-cart');
            }

            function closeCart() {
                els.cartOverlay.classList.remove('open');
                els.cartPanel.classList.remove('open');
            }

            function switchView(viewId) {
                document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
                document.getElementById(viewId).classList.add('active');
                if (viewId === 'view-cart') {
                    els.cartFooter.style.display = 'block';
                    els.btnMainAction.textContent = 'Commander';
                    els.btnMainAction.onclick = goToCheckout;
                } else if (viewId === 'view-checkout') {
                    els.cartFooter.style.display = 'block';
                    els.btnMainAction.textContent = 'Valider la commande';
                    els.btnMainAction.onclick = () => document.getElementById('checkoutForm').requestSubmit();
                } else if (viewId === 'view-success') {
                    els.cartFooter.style.display = 'none';
                }
            }

            function goToCheckout() {
                if (cart.length === 0) return;
                switchView('view-checkout');
            }

            async function handleOrder(e) {
                e.preventDefault();
                const orderData = {
                    date: new Date().toISOString(),
                    status: 'En attente de paiement',
                    customer: {
                        lastname: document.getElementById('input-lastname').value,
                        firstname: document.getElementById('input-firstname').value,
                        phone: document.getElementById('input-phone').value,
                        email: document.getElementById('input-email').value,
                        address: document.getElementById('address-input').value
                    },
                    items: cart,
                    total: els.totalDisplay.textContent
                };
                try {
                    els.btnMainAction.textContent = 'Pr√©paration du paiement...';
                    els.btnMainAction.disabled = true;

                    // 1. Create order in our system
                    const response = await fetch('/api/orders', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(orderData)
                    });

                    if (!response.ok) {
                        const errorText = await response.text();
                        console.error('Save order failed:', errorText);
                        try {
                            const errorData = JSON.parse(errorText);
                            throw new Error(errorData.error || 'Failed to save order');
                        } catch (e) {
                            throw new Error('Erreur serveur (Route API introuvable ou erreur fatale)');
                        }
                    }
                    const result = await response.json();
                    const orderId = result.orderId;

                    // 2. Create Stripe Session
                    const stripeRes = await fetch('/api/create-checkout-session', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            orderId: orderId,
                            items: cart,
                            customerEmail: orderData.customer.email
                        })
                    });

                    if (!stripeRes.ok) {
                        const errorText = await stripeRes.text();
                        console.error('Stripe session failed:', errorText);
                        try {
                            const errorData = JSON.parse(errorText);
                            throw new Error(errorData.error || 'Stripe session failed');
                        } catch (e) {
                            throw new Error('Erreur Stripe (Impossible de cr√©er la session de paiement)');
                        }
                    }
                    const stripeSession = await stripeRes.json();

                    // 3. Redirect to Stripe
                    window.location.href = stripeSession.url;

                } catch (err) {
                    console.error(err);
                    alert('Erreur: ' + err.message);
                    els.btnMainAction.textContent = 'Valider la commande';
                    els.btnMainAction.disabled = false;
                }
            }

            async function checkStripeStatus() {
                const urlParams = new URLSearchParams(window.location.search);
                const success = urlParams.get('success');
                const canceled = urlParams.get('canceled');
                const orderId = urlParams.get('order_id');

                if (success && orderId) {
                    document.getElementById('customerNameDisplay').textContent = "Client";
                    document.getElementById('orderIdDisplay').textContent = orderId;
                    openCart();
                    switchView('view-success');
                    cart = [];
                    localStorage.removeItem('laverie_cart');
                    updateCartUI();
                } else if (canceled) {
                    openCart();
                    switchView('view-checkout');
                    alert('Paiement annul√©. Vous pouvez r√©essayer.');
                }
            }

            function resetCart() {
                closeCart();
                setTimeout(() => switchView('view-cart'), 500);
            }
        </script>

    </main>

    <footer class="footer-soft" style="background: #f8f9fa; padding: 60px 0 30px; border-top: 1px solid #eee;">
        <div class="container" style="max-width: 1400px; margin: 0 auto; padding: 0 24px;">
            <div
                style="display: flex; flex-wrap: wrap; gap: 40px; margin-bottom: 40px; justify-content: space-between;">
                <div style="flex: 1; min-width: 250px;">
                    <h4 style="font-size: 1.1rem; margin-bottom: 15px; color: #333;">La Laverie Lens</h4>
                    <p style="color: #666; font-size: 0.9rem; line-height: 1.6; margin-bottom: 0;">310 Route de Lille,
                        62300 Lens</p>
                </div>
                <div style="flex: 1; min-width: 200px;">
                    <h4 style="font-size: 1.1rem; margin-bottom: 15px; color: #333;">Services</h4>
                    <ul style="list-style: none; padding: 0; color: #666; font-size: 0.9rem; line-height: 1.8;">
                        <li><a href="/services.html" style="color: #666; text-decoration: none;">Machines 6kg √† 20kg</a>
                        </li>
                        <li><a href="/lavage-couette-lens.html" style="color: #666; text-decoration: none;">Lavage
                                Couettes</a></li>
                        <li><a href="/sechage-rapide-lens.html" style="color: #666; text-decoration: none;">S√©chage
                                Rapide</a></li>
                        <li><a href="/tarifs.html" style="color: #666; text-decoration: none;">Nos Tarifs</a></li>
                    </ul>
                </div>
                <div style="flex: 1; min-width: 200px;">
                    <h4 style="font-size: 1.1rem; margin-bottom: 15px; color: #333;">Infos Pratiques</h4>
                    <ul style="list-style: none; padding: 0; color: #666; font-size: 0.9rem; line-height: 1.8;">
                        <li><a href="/faq.html" style="color: #666; text-decoration: none;">Questions Fr√©quentes</a>
                        </li>
                        <li><a href="/contact.html" style="color: #666; text-decoration: none;">Plan d'acc√®s</a></li>
                        <li><a href="/blog.html" style="color: #666; text-decoration: none;">Conseils & Actualit√©s</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div style="border-top: 1px solid #eee; padding-top: 20px; padding-bottom: 20px; text-align: center;">
                <h4 style="font-size: 1rem; margin-bottom: 15px; color: #333;">Suivez-nous</h4>
                <a href="/shop.html"
                    style="display:inline-flex; align-items:center; gap:5px; background:#ffeb3b; color:#1a1a1a; font-size: 0.85rem; font-weight: 700; padding: 5px 12px; border-radius: 20px; text-decoration:none; animation: shopPulse 2s infinite;"><span>üõí</span>
                    Shop</a>
                <a href="https://www.facebook.com/lalaverielens" target="_blank" rel="noopener noreferrer"
                    style="display: inline-flex; align-items: center; gap: 8px; background: #1877f2; color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: 500; transition: transform 0.2s;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
                    </svg>
                    La Laverie Lens sur Facebook
                </a>
            </div>

            <div
                style="border-top: 1px solid #eee; padding-top: 20px; text-align: center; color: #888; font-size: 0.85rem;">
                &copy; <span id="year-copy">2026</span> La Laverie Lens. Tous droits r√©serv√©s.
            </div>
        </div>
    </footer>

    <script> document.getElementById('year-copy').textContent = new Date().getFullYear(); </script>
</body>

</html>